---
title: "Using `pins`"
author: "Your Name"
date: "The Date"
output:
  html_document: 
    css: "style.css"
    includes:
      before_body: header.html
      after_body: footer.html
  pdf_document: 
    latex_engine: xelatex
mainfont: Source Sans Pro
header-includes:
- \usepackage{titling}
- \pretitle{\begin{center}\LARGE\includegraphics[width=12cm]{protips.png}\\[\bigskipamount]}
- \posttitle{\end{center}}
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

# Why You Should Use Pins
---
title: "Using `pins`"
author: "Your Name"
date: "The Date"
output:
  pdf_document: 
  html_document: 
    css: "style.css"
    includes:
      before_body: header.html
      after_body: footer.html
mainfont: Source Sans Pro
header-includes:
- \usepackage{titling}
- \pretitle{\begin{center}\LARGE\includegraphics[width=12cm]{protips.png}\\[\bigskipamount]}
- \posttitle{\end{center}}
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

# Why You Should Use Pins

As a data scientist, one of your main directives is to share content with decision makers others in your organization. Since you do it all day every day, you probably want a way to do this as quickly and easily as possible.

However, one of the issues is that it’s hard to know how and where to store resources. 

This is especially true for resources that can’t simply be put in a database for others to access without needing to email tons of files back and forth - for example model outputs, csv files, and r objects. Wouldn’t you rather have a smooth workflow that lets you get down to what really matters to you: doing data science.

This is where Pins come in. Here at RStudio, we developed Pins to make the process of discovering, caching, and sharing resources simpler, all with the ultimate aim of helping you create efficient data workflows.

If you’re forever asking your colleagues to download files before running your code, or are redeploying an entire app just to update the model or data in it, or if many pieces of your content are pointed to the same dataset, you have a use case for pins. Read on!


# What are Pins?
Pins are pretty much what they sound like: a way to store and then remotely access R and Python objects, just like you’d pin a sticky note to a (virtual) cork board.

You can take an object, like a model output,  and “pin” it to your board, which can be RStudio Connect, S3, Google Cloud, or even your website.

Once you’ve Pinned a resource, other folks can also discover them. This is great for two reasons: first, this means you can search well-known data repositories that are guaranteed to contain datasets, instead of searching on the internet and just hoping you find what you need. Pins also enhance the discoverability of internally-created datasets, which is great for learning more about what your colleagues are up to.

Once resources are pinned, you can also discover them. Pins let you search well-known data repositories that are guaranteed to contain datasets, instead of searching on the internet and hoping to find what you need, as well as enhancing the discoverability of internally-created datasets.

In the next section, you’re going to learn how to pin your first resource using RStudio Connect. From there, you can check out this website <http://pins.rstudio.com/> for further inspiration on how to use Pins to make your day-to-day life easier.


# How to Use Pins
You can think of this process in four main steps: First, install the package. Second, you get your R session to connect with your board. Third, and most excitingly, you'll Pin a resource. Finally, you can get resources anyone has pinned. Let’s walk through each step using RStudio Connect as an example.

Before you can publish a pin to the RSC board, you have to get an API key from Connect where you’re a publisher. It’s best practice to save this to your sys environment variables.

In RStudio Connect, generate an API key.  You can name this something like "forusingpins". Copy the value to the clipboard.

Now in R, you have to save this API key to your system environment variables.  Since you want this to persist and not evaporate every time R restarts, write this in your .Rprofile. Think about if you want this to be in your Project .Rprofile file or your home directory .Rprofile depending on whether you’ll use it just for this project, or for several. 

Wherever you’re setting it, you’ll add a line like: 
`Sys.setenv("RSC_API_KEY" = “<Key Value>”)`

Now you’re going to register the board. This is just telling your session that there's a place you can store resources.  "Register" here means Connect is saying to the board, “I see you and know you're there.” 

Use `pins::board_register(
    "rsconnect", 
    server = "https://colorado.rstudio.com/rsc/",
    key = Sys.getenv("RSC_API_KEY")
    )`  

Now you’re going to Pin your first resource. Put your object on the rsconnect board with `pin(my_data, description = "Super cool data set", board = "rsconnect")`  

Code to retrieve the pin will now be provided on the deployed content in RStudio Connect:
`setsData <- pin_get("username/my_data", board = "rsconnect")`

Now you're ready to retrieve your first pin. The first time you publish, it will fail saying "[Connect] Message: 'Invalid API key, the API key is empty.'"  because there is no key on the environment variable on connect.  Your final step is to put RSC_API_KEY in environment variables and refresh. 

You have now pinned and retrieved a pin! 
